!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}([function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return o}));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"invert",value:function(t){return 0-t}},{key:"normalizeAngle",value:function(t){for(var e=2*Math.PI;t<0;)t+=e;for(;t>e;)t-=e;return t}},{key:"angleTo",value:function(e,n){var r=n.x-e.x,o=n.y-e.y;return t.normalizeAngle(Math.atan2(o,r))}},{key:"randomInRange",value:function(t,e){var n=e-t;return Math.random()*n+t}},{key:"vectorSubtract",value:function(t,e){return"number"==typeof e?{x:t.x-e,y:t.y-e}:{x:t.x-e.x,y:t.y-e.y}}},{key:"vectorMultiply",value:function(t,e){return"number"==typeof e?{x:t.x*e,y:t.y*e}:{x:t.x*e.x,y:t.y*e.y}}},{key:"vectorNormalize",value:function(e){var n=t.vectorLength(e);return 0==n?e:{x:e.x/n,y:e.y/n}}},{key:"vectorDot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"vectorLength",value:function(e){return t.length(e.x,e.y)}},{key:"length",value:function(t,e){var n=Math.pow(t,2)+Math.pow(e,2);return Math.abs(Math.sqrt(n))}},{key:"clamp",value:function(t,e,n){return t=Math.min(n,t),t=Math.max(e,t)}}],(n=null)&&r(e.prototype,n),o&&r(e,o),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return et}));var r=n(0);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"x",0),i(this,"y",0),i(this,"changeX",0),i(this,"changeY",0),i(this,"worldX",0),i(this,"worldY",0),i(this,"isInFrame",!1)}var e,n,a;return e=t,(n=[{key:"update",value:function(){this.worldX=et.Game.camera.x+this.x,this.worldY=et.Game.camera.y+this.y}},{key:"setHardwarePosition",value:function(t,e){var n=t-et.Game.canvas.width/2,o=r.a.invert(e)+et.Game.canvas.height/2;this.changeX=this.x-n,this.changeY=this.y-o,this.x=n,this.y=o}}])&&o(e.prototype,n),a&&o(e,a),t}(),c=n(9),u=n(7);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var f=function(){function t(){var e,n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,(n="cursor")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,h.set(this,{writable:!0,value:{}}),p.set(this,{writable:!0,value:{}}),y.set(this,{writable:!0,value:{}}),d.set(this,{writable:!0,value:{}}),this.cursor=new a,window.addEventListener("keydown",(function(t){return o.onKeyDown(t)})),window.addEventListener("keyup",(function(t){return o.onKeyUp(t)})),window.addEventListener("mousemove",(function(t){return o.onMouseMove(t)})),window.addEventListener("mousedown",(function(t){return o.onMouseDown(t)})),window.addEventListener("mouseup",(function(t){return o.onMouseUp(t)})),et.Game.canvas.addEventListener("mouseenter",(function(t){return o.onEnterCanvas(t)})),et.Game.canvas.addEventListener("mouseleave",(function(t){return o.onExitCanvas(t)}))}var e,n,r;return e=t,(n=[{key:"update",value:function(){for(var t in this.cursor.update(),s(this,p))s(this,p)[t]=!1;for(var e in s(this,d))s(this,d)[e]=!1}},{key:"keyDown",value:function(t){var e=u.a["char"+t];return!0===s(this,h)[e]}},{key:"keyPushed",value:function(t){var e=u.a["char"+t];return!0===s(this,p)[e]}},{key:"buttonDown",value:function(t){var e=c.a["button"+t];return!0===s(this,y)[e]}},{key:"buttonPushed",value:function(t){var e=c.a["button"+t];return!0===s(this,d)[e]}},{key:"stopPropagation",value:function(t){et.Game.audio.enable(),this.cursor.isInFrame&&t.preventDefault()}},{key:"onEnterCanvas",value:function(t){this.cursor.isInFrame=!0}},{key:"onExitCanvas",value:function(t){this.cursor.isInFrame=!1}},{key:"onMouseMove",value:function(t){this.cursor.setHardwarePosition(t.offsetX,t.offsetY)}},{key:"onMouseDown",value:function(t){var e=c.a["button"+t.which];s(this,y)[e]=!0,this.stopPropagation(t)}},{key:"onMouseUp",value:function(t){var e=c.a["button"+t.which];s(this,y)[e]=!1,s(this,d)[e]=!0,this.stopPropagation(t)}},{key:"onKeyDown",value:function(t){var e=u.a["char"+t.keyCode];s(this,h)[e]=!0,this.stopPropagation(t)}},{key:"onKeyUp",value:function(t){var e=u.a["char"+t.keyCode];s(this,h)[e]=!1,s(this,p)[e]=!0,this.stopPropagation(t)}}])&&l(e.prototype,n),r&&l(e,r),t}(),h=new WeakMap,p=new WeakMap,y=new WeakMap,d=new WeakMap,v=n(3);function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var g=function(){function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,(n="context")in(e=this)?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,w.set(this,{writable:!0,value:{}}),this.context=new AudioContext}var e,n,r;return e=t,(n=[{key:"enable",value:function(){"suspended"===this.context.state&&this.context.resume()}},{key:"playSound",value:function(t){if(this.audioLoaded(t)){var e=this.context.createBufferSource();return e.buffer=m(this,w)[t],e.connect(this.context.destination),e.start(0),e}return FrostFlake.Log.warn("Audio not loaded ".concat(t,", attempting to load now.")),this.loadSound(t),null}},{key:"audioLoaded",value:function(t){return null!==t&&""!==t&&t in m(this,w)&&m(this,w)[t]instanceof AudioBuffer}},{key:"loadSound",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=this;""==t||null==t||t in m(this,w)||"running"!=this.context.state||(m(e,w)[t]="...",Data.load(t,"arraybuffer",(function(n){n instanceof ArrayBuffer?e.context.decodeAudioData(n,(function(n){m(e,w)[t]=n}),(function(){FrostFlake.Log.error("Failed to decode audio for: ".concat(t))})):FrostFlake.Log.error("Response was not an ArrayBuffer: ".concat(t))}),(function(e){FrostFlake.Log.error("Failed to load ".concat(t," with response ").concat(xhr.status))})))}}])&&b(e.prototype,n),r&&b(e,r),t}(),w=new WeakMap,_=n(6);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=j(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?E(t):e}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(a,t);var e,n,r,o,i=(e=a,function(){var t,n=j(e);if(S()){var r=j(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return R(this,t)});function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),T(E(n=i.call(this,t,e)),"resolution",1),T(E(n),"antialias",!1),T(E(n),"lastPosition",{x:0,y:0,rotation:0}),n}return n=a,(r=[{key:"update",value:function(){this.lastPosition.x=this.position.x,this.lastPosition.y=this.position.y,this.lastPosition.rotation=this.position.rotation,k(j(a.prototype),"update",this).call(this)}},{key:"reset",value:function(){this.resolution=1,this.antialias=!1,this.position={x:0,y:0,rotation:0},this.velocity={x:0,y:0,rotation:0},this.acceleration={x:0,y:0,rotation:0},this.drag=0}}])&&P(n.prototype,r),o&&P(n,o),a}(_.a),M=n(2),C=n(10),F=n(11),L=n(4);function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=new XMLHttpRequest;o.addEventListener("readystatechange",(function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?(et.Log.info("Successfully loaded: ".concat(t,".")),n&&n(o.response)):(et.Log.warn("Got bad ".concat(o.status," response for ").concat(t,".")),r&&r(o.response)))})),o.responseType=e,o.open("GET",t,!0),o.send()}},{key:"loadJson",value:function(e,n,r){t.load(e,"json",(function(t){n&&n(t)}),r)}}],(n=null)&&I(e.prototype,n),r&&I(e,r),t}();function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var W=function(){function t(e,n){var r,o,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),U.set(this,{writable:!0,value:{}}),i=void 0,(o="context")in(r=this)?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,this.context=e.getContext("2d"),this.background=n}var e,n,o;return e=t,(n=[{key:"checkAndPreloadPositionables",value:function(t){for(var e=!0,n=0;n<t.length;n++)this.textureLoaded(t[n].texture)||(e=!1),t[n].children.length>0&&!1===this.checkAndPreloadPositionables(t[n].children)&&(e=!1);return e}},{key:"renderToTexture",value:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"rgba(0,0,0,0)",a=this.context,c=new D;c.background=i;var u=document.createElement("canvas");u.height=r,u.width=n,this.context=u.getContext("2d"),this.background=i,this.draw(e,c),this.loadTexture(u.toDataURL(),o,t),this.context=a}},{key:"draw",value:function(t,e){var n=1/e.resolution,o=r.a.invert(e.x)+this.context.canvas.width/2*e.resolution,i=e.y+this.context.canvas.height/2*e.resolution;this.context.save(),this.context.imageSmoothingEnabled=e.antialias,this.context.fillStyle=e.background,this.context.fillRect(0,0,this.context.canvas.width,this.context.canvas.height),this.context.scale(n,n),this.context.translate(o,i);for(var a=0;a<t.length;a++)this.drawPositionable(t[a]);this.context.restore()}},{key:"drawPositionable",value:function(t){t instanceof C.a&&t.visible&&(t instanceof M.a?this.drawSprite(t):t instanceof F.a?this.drawCircle(t):t instanceof _.a&&this.drawRect(t))}},{key:"drawCircle",value:function(t){var e=t.x,n=r.a.invert(t.y);this.context.save(),this.context.translate(e,n),this.context.strokeStyle=t.color,this.context.beginPath(),this.context.arc(0,0,t.radius,0,2*Math.PI),this.context.stroke(),this.context.restore()}},{key:"drawRect",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.x,o=r.a.invert(t.y);this.context.save(),this.context.translate(n,o),e&&this.context.rotate(t.absolutePosition.rotation),this.context.strokeStyle=t.color,this.context.strokeRect(-t.width/2,-t.height/2,t.width,t.height),this.context.restore()}},{key:"drawSprite",value:function(t){var e=t.x,n=r.a.invert(t.y),o=-t.rotation,i=t.alpha;if(this.context.save(),this.context.translate(e,n),this.context.rotate(o),this.context.globalAlpha=i,this.textureLoaded(t.texture)){var a=B(this,U)[t.texture];null==t.frame&&(t.frame=new L.a,t.frame.width=a.width,t.frame.height=a.height),this.context.drawImage(a,t.frame.left,t.frame.top,t.frame.width,t.frame.height,t.frame.width/-2*t.scale,t.frame.height/-2*t.scale,t.frame.width*t.scale,t.frame.height*t.scale),et.Game.showDebug&&(this.context.strokeStyle=t.color,this.context.strokeRect(-t.frame.width/2*t.scale,-t.frame.height/2*t.scale,t.frame.width*t.scale,t.frame.height*t.scale))}else this.loadTexture(t.texture);if(this.context.globalAlpha=1,et.Game.showDebug&&this.drawPositionable(t.collision),t.children.length>0)for(var c=0;c<t.children.length;c++)this.drawPositionable(t.children[c],this.context);this.context.restore()}},{key:"textureLoaded",value:function(t){return null!==t&&t in B(this,U)&&B(this,U)[t]instanceof HTMLImageElement==1&&!0===B(this,U)[t].complete}},{key:"loadTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this;""!=(n=null==n?t:n)&&null!=n&&(n in B(this,U)&&"..."==B(this,U)[n]||(r.textureLoaded(n)?e&&e(n):(B(r,U)[n]="...",A.load(t,"blob",(function(t){var o=document.createElement("img");o.onload=function(){B(r,U)[n]=o,e&&e(n)},o.src=URL.createObjectURL(t)}),(function(t){et.Log.error("Failed to load image ".concat(n))})))))}}])&&N(e.prototype,n),o&&N(e,o),t}(),U=new WeakMap;function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"debug";G(this,t),V.set(this,{writable:!0,value:void 0}),J.set(this,{writable:!0,value:{debug:0,info:1,warn:2,error:3}}),H.set(this,{writable:!0,value:{0:"debug",1:"info",2:"warn",3:"error"}}),this.setLevel(e)}var e,n,r;return e=t,(n=[{key:"setLevel",value:function(t){if(!(t in X(this,J)))throw"".concat(t," is not a valid debug level");!function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,V,t)}},{key:"debug",value:function(t){this.write(X(this,J).debug,t)}},{key:"info",value:function(t){this.write(X(this,J).info,t)}},{key:"warn",value:function(t){this.write(X(this,J).warn,t)}},{key:"error",value:function(t){this.write(X(this,J).error,t)}},{key:"write",value:function(t,e){if(X(this,J)[X(this,V)]<t){var n=X(this,H)[t];console.log("".concat(n,": ").concat(e))}}}])&&K(e.prototype,n),r&&K(e,r),t}(),V=new WeakMap,J=new WeakMap,H=new WeakMap;function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),z(this,"startTime",void 0),z(this,"lastFrameTime",void 0),z(this,"frameSeconds",void 0),z(this,"gameTimeSeconds",void 0),z(this,"recentFrames",[]),this.startTime=new Date,this.lastFrameTime=new Date,this.frameSeconds=0,this.gameTimeSeconds=0}var e,n,r;return e=t,(n=[{key:"update",value:function(){var e=this.lastFrameTime.getTime(),n=new Date,r=n-e;r<t.MAX_FRAME_DELTA?this.frameSeconds=r/1e3:this.frameSeconds=0,this.gameTimeSeconds+=this.frameSeconds,this.lastFrameTime=n,this.recentFrames.push(this.frameSeconds),this.recentFrames.length>t.FPS_SAMPLES&&this.recentFrames.shift()}},{key:"aveFps",value:function(){for(var t=0,e=0;e<this.recentFrames.length;e++)t+=this.recentFrames[e];return 1/(t/this.recentFrames.length)}}])&&Y(e.prototype,n),r&&Y(e,r),t}();function Z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}z(Q,"MAX_FRAME_DELTA",500),z(Q,"FPS_SAMPLES",120);var et=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rgb(0,0,0)";Z(this,t),nt.set(this,{writable:!0,value:void 0}),tt(this,"time",void 0),tt(this,"fps",void 0),tt(this,"camera",void 0),tt(this,"canvas",void 0),tt(this,"renderer",void 0),tt(this,"view",void 0),tt(this,"background",void 0),tt(this,"input",void 0),tt(this,"audio",void 0),tt(this,"showDebug",!1),t.Game=this,t.Log=new q,this.canvas=e,this.fps=n,this.background=r,this.input=new f,this.view=new v.a,this.audio=new g,this.camera=new D(this.canvas.width,this.canvas.height),this.camera.background=r,this.renderer=new W(this.canvas),t.Log.info("FrostFlake instance created...")}var e,n,r;return e=t,(n=[{key:"start",value:function(){t.Log.info("Starting FrostFlake..."),this.time=new Q;var e=this;!function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,nt,window.setInterval((function(){e.update()}),1e3/this.fps))}},{key:"update",value:function(){this.time.update(),this.camera.update(),this.view.update(),this.input.update(),this.renderer.draw(this.view.children,this.camera,this.canvas,this.background)}}])&&$(e.prototype,n),r&&$(e,r),t}(),nt=new WeakMap;tt(et,"Game",void 0),tt(et,"Log",void 0)},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(10),o=n(11);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(r,t);var e,n=(e=r,function(){var t,n=y(e);if(p()){var r=y(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function r(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return a(this,r),d(h(t=n.call(this)),"alpha",1),d(h(t),"frame",null),d(h(t),"texture",null),d(h(t),"animation",null),d(h(t),"scale",1),m.set(h(t),{writable:!0,value:null}),t.texture=e,t.collision=new o.a,t.color="rgba(255, 255, 255, 0.2)",t}return l(r,[{key:"collision",get:function(){return v(this,m)},set:function(t){v(this,m)&&(v(this,m).parent=null),function(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,m,t),v(this,m).parent=this}}]),l(r,[{key:"getAbsolutePosition",value:function(){var t={x:0,y:0,rotation:0};if(null!=this.parent){var e=this.parent.getAbsolutePosition(),n=MathUtil.length(this.x,this.y);t.x=Math.cos(e.rotation)*n+e.x,t.y=Math.sin(e.rotation)*n+e.y,t.rotation=e.rotation+this.rotation}else t.x=this.x,t.y=this.y,t.rotation=this.rotation;return t}},{key:"update",value:function(){c(y(r.prototype),"update",this).call(this),this.animation&&(this.animation.update(),this.texture=this.animation.texture,this.frame=this.animation.currentFrame)}}]),r}(r.a),m=new WeakMap},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"children",[]),o(this,"sortNeeded",!1)}var e,n,i;return e=t,(n=[{key:"update",value:function(){this.sortNeeded&&(this.children.sort((function(t,e){return t.layer-e.layer})),this.sortNeeded=!1);for(var t=0;t<this.children.length;t++)this.children[t].update()}},{key:"addChild",value:function(t){if(this.children.indexOf(t)>-1)throw"positionable has already been added to view.";this.children.push(t),this.sortNeeded=!0}},{key:"removeChild",value:function(t){this.tryRemoveItem(t,this.children)}},{key:"tryRemoveItem",value:function(t,e){var n=e.indexOf(t);n>-1&&e.splice(n,1)}},{key:"destroyChild",value:function(t){t.destroy(),this.removeChild(t)}},{key:"clearChildren",value:function(){this.children=[]}},{key:"destroy",value:function(){for(var t=this.children.length-1;t>-1;t--)this.destroyChild(this.children[t])}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return i}));var i=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;r(this,t),o(this,"top",0),o(this,"left",0),o(this,"width",0),o(this,"height",0),o(this,"seconds",0),this.left=e,this.top=n,this.width=i,this.height=a,this.seconds=c}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return o}));var o=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};r(o,"None",0),r(o,"Move",1),r(o,"Bounce",2)},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(8),o=n(11);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(i,t);var e,n=(e=i,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),p(s(r=n.call(this)),"width",void 0),p(s(r),"height",void 0),r.width=t,r.height=e,r}return c(i,[{key:"left",get:function(){return this.absolutePosition.x-this.width/2}},{key:"right",get:function(){return this.absolutePosition.x+this.width/2}},{key:"top",get:function(){return this.absolutePosition.y+this.height/2}},{key:"bottom",get:function(){return this.absolutePosition.y-this.height/2}}]),c(i,[{key:"collideWith",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RepositionType.None,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return t instanceof o.a?r.a.collideCircleVsRect(t,this,e,a,n,c):t instanceof i?r.a.collideRectVsRect(this,t,e,n,a,c):void 0}}]),i}(r.a)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return o}));var o=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};r(o,"Backspace",8),r(o,"Tab",9),r(o,"Enter",13),r(o,"Shift",16),r(o,"Ctrl",17),r(o,"Alt",18),r(o,"PauseBreak",19),r(o,"CapsLock",20),r(o,"Esc",27),r(o,"Space",32),r(o,"PageUp",33),r(o,"PageDown",34),r(o,"End",35),r(o,"Home",36),r(o,"Left",37),r(o,"Up",38),r(o,"Right",39),r(o,"Down",40),r(o,"Insert",45),r(o,"Delete",46),r(o,"Oem0",48),r(o,"Oem1",49),r(o,"Oem2",50),r(o,"Oem3",51),r(o,"Oem4",52),r(o,"Oem5",53),r(o,"Oem6",54),r(o,"Oem7",55),r(o,"Oem8",56),r(o,"Oem9",57),r(o,"A",65),r(o,"B",66),r(o,"C",67),r(o,"D",68),r(o,"E",69),r(o,"F",70),r(o,"G",71),r(o,"H",72),r(o,"I",73),r(o,"J",74),r(o,"K",75),r(o,"L",76),r(o,"M",77),r(o,"N",78),r(o,"O",79),r(o,"P",80),r(o,"Q",81),r(o,"R",82),r(o,"S",83),r(o,"T",84),r(o,"U",85),r(o,"V",86),r(o,"W",87),r(o,"X",88),r(o,"Y",89),r(o,"Z",90),r(o,"Windows",91),r(o,"RightClick",93),r(o,"Num0",96),r(o,"Num1",97),r(o,"Num2",98),r(o,"Num3",99),r(o,"Num4",100),r(o,"Num5",101),r(o,"Num6",102),r(o,"Num7",103),r(o,"Num8",104),r(o,"Num9",105),r(o,"NumStar",106),r(o,"NumPlus",107),r(o,"NumMinus",109),r(o,"NumPeriod",110),r(o,"NumSlash",111),r(o,"F1",112),r(o,"F2",113),r(o,"F3",114),r(o,"F4",115),r(o,"F5",116),r(o,"F6",117),r(o,"F7",118),r(o,"F8",119),r(o,"F9",120),r(o,"F10",121),r(o,"F11",122),r(o,"F12",123),r(o,"NumLock",144),r(o,"ScrollLock",145),r(o,"MyComputer",182),r(o,"MyCalculator",183),r(o,"Semicolon",186),r(o,"Equal",187),r(o,"Comma",188),r(o,"Dash",189),r(o,"Period",190),r(o,"ForwardSlash",191),r(o,"Tick",192),r(o,"LeftBracket",219),r(o,"Backslash",220),r(o,"RightBracket",221),r(o,"SingleQuote",222),r(o,"char8","Backspace"),r(o,"char9","Tab"),r(o,"char13","Enter"),r(o,"char16","Shift"),r(o,"char17","Ctrl"),r(o,"char18","Alt"),r(o,"char19","PauseBreak"),r(o,"char20","CapsLock"),r(o,"char27","Esc"),r(o,"char32","Space"),r(o,"char33","PageUp"),r(o,"char34","PageDown"),r(o,"char35","End"),r(o,"char36","Home"),r(o,"char37","Left"),r(o,"char38","Up"),r(o,"char39","Right"),r(o,"char40","Down"),r(o,"char45","Insert"),r(o,"char46","Delete"),r(o,"char48","Oem0"),r(o,"char49","Oem1"),r(o,"char50","Oem2"),r(o,"char51","Oem3"),r(o,"char52","Oem4"),r(o,"char53","Oem5"),r(o,"char54","Oem6"),r(o,"char55","Oem7"),r(o,"char56","Oem8"),r(o,"char57","Oem9"),r(o,"char65","A"),r(o,"char66","B"),r(o,"char67","C"),r(o,"char68","D"),r(o,"char69","E"),r(o,"char70","F"),r(o,"char71","G"),r(o,"char72","H"),r(o,"char73","I"),r(o,"char74","J"),r(o,"char75","K"),r(o,"char76","L"),r(o,"char77","M"),r(o,"char78","N"),r(o,"char79","O"),r(o,"char80","P"),r(o,"char81","Q"),r(o,"char82","R"),r(o,"char83","S"),r(o,"char84","T"),r(o,"char85","U"),r(o,"char86","V"),r(o,"char87","W"),r(o,"char88","X"),r(o,"char89","Y"),r(o,"char90","Z"),r(o,"char91","Windows"),r(o,"char93","RightClick"),r(o,"char96","Num0"),r(o,"char97","Num1"),r(o,"char98","Num2"),r(o,"char99","Num3"),r(o,"char100","Num4"),r(o,"char101","Num5"),r(o,"char102","Num6"),r(o,"char103","Num7"),r(o,"char104","Num8"),r(o,"char105","Num9"),r(o,"char106","NumStar"),r(o,"char107","NumPlus"),r(o,"char109","NumMinus"),r(o,"char110","NumPeriod"),r(o,"char111","NumSlash"),r(o,"char112","F1"),r(o,"char113","F2"),r(o,"char114","F3"),r(o,"char115","F4"),r(o,"char116","F5"),r(o,"char117","F6"),r(o,"char118","F7"),r(o,"char119","F8"),r(o,"char120","F9"),r(o,"char121","F10"),r(o,"char122","F11"),r(o,"char123","F12"),r(o,"char144","NumLock"),r(o,"char145","ScrollLock"),r(o,"char182","MyComputer"),r(o,"char183","MyCalculator"),r(o,"char186","Semicolon"),r(o,"char187","Equal"),r(o,"char188","Comma"),r(o,"char189","Dash"),r(o,"char190","Period"),r(o,"char191","ForwardSlash"),r(o,"char192","Tick"),r(o,"char219","LeftBracket"),r(o,"char220","Backslash"),r(o,"char221","RightBracket"),r(o,"char222","SingleQuote")},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(5),o=n(10),i=n(0);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(p,t);var e,n,o,a,h=(e=p,function(){var t,n=f(e);if(s()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function p(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),h.call(this)}return n=p,a=[{key:"collideCircleVsCircle",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.None,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=i.a.vectorSubtract(e.absolutePosition,t.absolutePosition),l=i.a.length(u.x,u.y),s=t.radius+e.radius,f=s-l,h=f>0;if(h&&n!=r.a.None){var p=i.a.vectorNormalize(u);0==i.a.vectorLength(p)&&(p.y=1);var y=a/(o+a),d=o/(o+a);if(t.root.position.x+=p.x*(-f*y),t.root.position.y+=p.y*(-f*y),e.root.position.x+=p.x*(f*d),e.root.position.y+=p.y*(f*d),n==r.a.Bounce){var v=i.a.vectorDot(i.a.vectorSubtract(t.root.velocity,e.root.velocity),p)*c,b=i.a.vectorMultiply(p,v*y);t.root.velocity.x-=2*b.x,t.root.velocity.y-=2*b.y;var m=i.a.vectorMultiply(p,v*d);e.root.velocity.x+=2*m.x,e.root.velocity.y+=2*m.y}}return h}},{key:"collideCircleVsRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.None,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=t.radius+e.width/2,l=t.absolutePosition.x-e.absolutePosition.x,s=u-Math.abs(l),f=t.radius+e.height/2,h=t.absolutePosition.y-e.absolutePosition.y,p=f-Math.abs(h),y=s>0&&p>0;if(y&&n!=r.a.None){var d={x:(s<=p?1:0)*Math.sign(l),y:(s>=p?1:0)*Math.sign(h)};0==i.a.vectorLength(d)&&(d.y=1);var v=a/(o+a),b=o/(o+a);if(t.root.position.x+=d.x*s*v,t.root.position.y+=d.y*p*v,e.root.position.x-=d.x*s*b,e.root.position.y-=d.y*p*b,n==r.a.Bounce){var m=i.a.vectorDot(i.a.vectorSubtract(t.root.velocity,e.root.velocity),d)*c,g=i.a.vectorMultiply(d,m*v);t.root.velocity.x-=2*g.x,t.root.velocity.y-=2*g.y;var w=i.a.vectorMultiply(d,m*b);e.root.velocity.x+=2*w.x,e.root.velocity.y+=2*w.y}}return y}},{key:"collideRectVsRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.a.None,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,u=t.width/2+e.width/2,l=t.absolutePosition.x-e.absolutePosition.x,s=u-Math.abs(l),f=t.height/2+e.height/2,h=t.absolutePosition.y-e.absolutePosition.y,p=f-Math.abs(h),y=s>0&&p>0;if(y&&n!=r.a.None){var d={x:(s<=p?1:0)*Math.sign(l),y:(s<=p?0:1)*Math.sign(h)};0==i.a.vectorLength(d)&&(d.y=1);var v=a/(o+a),b=o/(o+a);if(t.root.position.x+=d.x*s*v,t.root.position.y+=d.y*p*v,e.root.position.x-=d.x*s*b,e.root.position.y-=d.y*p*b,n==r.a.Bounce){var m=i.a.vectorDot(i.a.vectorSubtract(t.root.velocity,e.root.velocity),d)*c,g=i.a.vectorMultiply(d,m*v);t.root.velocity.x-=2*g.x,t.root.velocity.y-=2*g.y;var w=i.a.vectorMultiply(d,m*b);e.root.velocity.x+=2*w.x,e.root.velocity.y+=2*w.y}}return y}}],(o=[{key:"absolutePosition",get:function(){var t={x:0,y:0,rotation:0};if(null!=this.parent){var e=this.parent.absolutePosition,n=i.a.length(this.x,this.y);t.x=Math.cos(e.rotation)*n+e.x,t.y=Math.sin(e.rotation)*n+e.y,t.rotation=e.rotation+this.rotation}else t.x=this.x,t.y=this.y,t.rotation=this.rotation;return t}}])&&c(n.prototype,o),a&&c(n,a),p}(o.a)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return o}));var o=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};r(o,"Left",1),r(o,"Middle",2),r(o,"Right",3),r(o,"button1","Left"),r(o,"button2","Middle"),r(o,"button3","Right")},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(1),o=n(0);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t),u(this,"color","red"),u(this,"position",{x:0,y:0,rotation:0}),u(this,"velocity",{x:0,y:0,rotation:0}),u(this,"acceleration",{x:0,y:0,rotation:0}),u(this,"visible",!0),u(this,"drag",0),u(this,"layer",0),u(this,"parent",null),u(this,"children",[]),u(this,"destroyed",!1),u(this,"applyRotationAccelerationAndDrag",!1)}return c(t,[{key:"x",get:function(){return this.position.x},set:function(t){this.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.position.y=t}},{key:"rotation",get:function(){return this.position.rotation},set:function(t){this.position.rotation=t}},{key:"absolutePosition",get:function(){var t={x:0,y:0,rotation:0};if(null!=this.parent){var e=this.parent.absolutePosition,n=o.a.length(this.x,this.y);t.x=Math.cos(e.rotation)*n+e.x,t.y=Math.sin(e.rotation)*n+e.y,t.rotation=e.rotation+this.rotation}else t.x=this.x,t.y=this.y,t.rotation=this.rotation;return t}},{key:"root",get:function(){for(var e=this;e.parent instanceof t;)e=e.parent;return e}}]),c(t,[{key:"addChild",value:function(t){t.parent=this,this.children.push(t),this.children.sort((function(t,e){return t.layer-e.layer}))}},{key:"removeChild",value:function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1),t.parent=null}},{key:"attach",value:function(t){t.addChild(this)}},{key:"detach",value:function(){this.parent instanceof t&&this.parent.removeChild(this)}},{key:"moveRootX",value:function(e){for(var n=this;n.parent instanceof t;)n=n.parent;n.position.x+=e}},{key:"moveRootY",value:function(e){for(var n=this;n.parent instanceof t;)n=n.parent;n.position.y+=e}},{key:"update",value:function(){this.preUpdate();var t=r.a.Game.time.frameSeconds,e=t*t/2;this.position.x+=this.velocity.x*t+this.acceleration.x*e,this.position.y+=this.velocity.y*t+this.acceleration.y*e,this.position.rotation+=this.velocity.rotation*t+this.acceleration.rotation*e,this.velocity.x+=this.acceleration.x*t-this.drag*this.velocity.x*t,this.velocity.y+=this.acceleration.y*t-this.drag*this.velocity.y*t,this.applyRotationAccelerationAndDrag&&(this.velocity.rotation+=this.acceleration.rotation*t-this.drag*this.velocity.rotation*t),this.position.rotation=o.a.normalizeAngle(this.position.rotation);for(var n=0;n<this.children.length;n++)this.children[n].update()}},{key:"preUpdate",value:function(){}},{key:"destroy",value:function(){if(this.detach(),this.children.length>0)for(var t=this.children.length-1;t>-1;t--)this.children[t].destroy(),this.children.splice(t,1);this.destroyed=!0}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(8),o=n(6);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(v,t);var e,n,i,y,d=(e=v,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function v(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;return a(this,v),p(s(t=d.call(this)),"radius",void 0),t.radius=e,t}return n=v,(i=[{key:"collideWith",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RepositionType.None,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return t instanceof v?r.a.collideCircleVsCircle(this,t,e,n,i,a):t instanceof o.a?r.a.collideCircleVsRect(this,t,e,n,i,a):void 0}}])&&c(n.prototype,i),y&&c(n,y),v}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(3),o=n(5),i=n(2),a=n(6),c=n(4),u=n(0);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(g,t);var e,n,r,l,m=(e=g,function(){var t,n=v(e);if(d()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return p(this,t)});function g(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),b(y(t=m.call(this)),"walls",[]),b(y(t),"balls",[]),t.createWalls(),t.createBalls(),t}return n=g,(r=[{key:"update",value:function(){f(v(g.prototype),"update",this).call(this);for(var t=this.balls.length-1;t>-1;t--){for(var e=this.balls[t],n=t;n>-1;n--){var r=this.balls[n];e!=r&&1==e.collision.collideWith(r.collision,o.a.Bounce,.5,.5,1)&&(e.velocity.rotation=u.a.randomInRange(-3,3))}for(var i=this.walls.length-1;i>-1;i--){var a=this.walls[i];1==e.collision.collideWith(a.collision,o.a.Bounce,0,1,1)&&(e.velocity.rotation=u.a.randomInRange(-3,3))}}}},{key:"createWalls",value:function(){for(var t=0;t<20;t++){var e=new i.a("/content/spritesheet.png");e.collision=new a.a(32,32),e.frame=new c.a(224,32,32,32),e.x=32*t-320+16,e.y=224,this.walls.push(e),this.addChild(e);var n=new i.a("/content/spritesheet.png");n.collision=new a.a(32,32),n.frame=new c.a(224,32,32,32),n.x=32*t-320+16,n.y=-224,this.walls.push(n),this.addChild(n)}for(var r=0;r<14;r++){var o=new i.a("/content/spritesheet.png");o.collision=new a.a(32,32),o.frame=new c.a(224,32,32,32),o.x=-304,o.y=32*r-240+16,this.walls.push(o),this.addChild(o);var u=new i.a("/content/spritesheet.png");u.collision=new a.a(32,32),u.frame=new c.a(224,32,32,32),u.x=304,u.y=32*r-240+16,this.walls.push(u),this.addChild(u)}}},{key:"createBalls",value:function(){for(var t=0;t<25;t++){var e=new i.a("/content/frostflake.png");e.position.x=u.a.randomInRange(-200,200),e.position.y=u.a.randomInRange(-200,200),e.velocity.x=u.a.randomInRange(-300,300),e.velocity.y=u.a.randomInRange(-300,300),this.balls.push(e),this.addChild(e)}}}])&&s(n.prototype,r),l&&s(n,l),g}(r.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(1),o=n(2),i=n(3),a=n(0),c=n(4),u=n(9),l=n(7);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(g,t);var e,n,i,s,m=(e=g,function(){var t,n=b(e);if(v()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return y(this,t)});function g(){var t,e,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),t=m.call(this),e=d(t),i=void 0,(n="cursorSprite")in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i;for(var u=0;u<10;u++){var l=new o.a("/content/frostflake.png");l.x=a.a.randomInRange(-300,300),l.y=a.a.randomInRange(-200,200),l.alpha=a.a.randomInRange(.2,.85),l.velocity.rotation=a.a.randomInRange(-3,3),t.addChild(l)}return t.cursorSprite=new o.a("/content/spritesheet.png"),t.cursorSprite.frame=new c.a(32,0,32,32),t.addChild(t.cursorSprite),r.a.Game.camera.drag=3,t}return n=g,(i=[{key:"update",value:function(){h(b(g.prototype),"update",this).call(this);var t=r.a.Game.input,e=t.cursor,n=r.a.Game.camera;t.keyDown(l.a.W)?n.velocity.y=100:t.keyDown(l.a.S)&&(n.velocity.y=-100),t.keyDown(l.a.A)?n.velocity.x=-100:t.keyDown(l.a.D)&&(n.velocity.x=100),this.cursorSprite.x=e.worldX,this.cursorSprite.y=e.worldY,t.buttonDown(u.a.Left)?this.cursorSprite.velocity.rotation=3:this.cursorSprite.velocity.rotation=0}}])&&f(n.prototype,i),s&&f(n,s),g}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(1),o=n(2),i=n(3),a=n(0);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(d,t);var e,n,i,c,y=(e=d,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function d(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),t=y.call(this);for(var e=0;e<2e3;e++){var n=new o.a("/content/frostflake.png");n.x=a.a.randomInRange(-300,300),n.y=a.a.randomInRange(-200,200),n.alpha=a.a.randomInRange(.2,.85),n.velocity.rotation=a.a.randomInRange(-3,3),t.addChild(n)}return t}return n=d,(i=[{key:"update",value:function(){l(p(d.prototype),"update",this).call(this),r.a.Log.info(r.a.Game.time.aveFps())}}])&&u(n.prototype,i),c&&u(n,c),d}(i.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(1),o=n(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(v,t);var e,n,i,y,d=(e=v,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function v(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),p(s(t=d.call(this)),"parentFlake",void 0),p(s(t),"childFlake1",void 0),p(s(t),"childFlake2",void 0),t.parentFlake=new o.a("/content/frostflake.png"),t.parentFlake.velocity.rotation=3,t.addChild(t.parentFlake),t.childFlake1=new o.a("/content/frostflake.png"),t.childFlake1.x=-40,t.childFlake1.velocity.rotation=-5,t.parentFlake.addChild(t.childFlake1),t.childFlake2=new o.a("/content/frostflake.png"),t.childFlake2.x=40,t.childFlake2.velocity.rotation=5,t.parentFlake.addChild(t.childFlake2),t}return n=v,(i=[{key:"update",value:function(){c(h(v.prototype),"update",this).call(this);var t=this.childFlake1;r.a.Log.info("Relative vs absolute position: ".concat(t.x,",").concat(t.y," - ").concat(t.absolutePosition.x,",").concat(t.absolutePosition.y))}}])&&a(n.prototype,i),y&&a(n,y),v}(n(3).a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(1),o=n(2),i=n(3),a=n(0);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(d,t);var e,n,i,c,y=(e=d,function(){var t,n=p(e);if(h()){var r=p(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return f(this,t)});function d(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),t=y.call(this),r.a.Log.info("Starting render target demo..."),r.a.Game.renderer.loadTexture(d.TEXTURE,(function(){r.a.Log.info("Texture loaded, rendering"),t.createSpriteTexture()})),t}return n=d,(i=[{key:"createSpriteTexture",value:function(){var t=[];r.a.Log.info("Adding ".concat(1e5," sprites for one-time render"));for(var e=0;e<1e5;e++){var n=new o.a(d.TEXTURE);n.x=a.a.randomInRange(-300,300),n.y=a.a.randomInRange(-200,200),n.alpha=a.a.randomInRange(.2,.85),n.scale=a.a.randomInRange(.15,.2),n.position.rotation=a.a.randomInRange(-3,3),t.push(n)}r.a.Log.info("Rendering..."),r.a.Game.renderer.renderToTexture(d.TARGETNAME,t,640,480),r.a.Log.info("Rendered. Now setting render target as new sprite texture.");var i=new o.a(d.TARGETNAME);i.velocity.rotation=a.a.randomInRange(-3,3),this.addChild(i)}},{key:"update",value:function(){l(p(d.prototype),"update",this).call(this)}}])&&u(n.prototype,i),c&&u(n,c),d}(i.a);y(d,"TEXTURE","/content/frostflake.png"),y(d,"TARGETNAME","renderTarget")},function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n(1),o=n(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(y,t);var e,n,r,o,i=(e=y,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function y(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),p(s(n=i.call(this)),"tileset",void 0),p(s(n),"tilemap",void 0),p(s(n),"collidables",[]),p(s(n),"layerSprites",[]),p(s(n),"tilesetJsonLoaded",!1),p(s(n),"tilemapJsonLoaded",!1),p(s(n),"tilemapSpriteLoaded",!1),p(s(n),"tilemapLoaded",!1),p(s(n),"rootPath","");var r=s(n);Data.loadJson(t,(function(t){r.tileset=t,r.tilesetJsonLoaded=!0})),Data.loadJson(e,(function(t){r.tilemap=t,r.tilemapJsonLoaded=!0}));var o=t.split("/");return o.pop(),n.rootPath=o.join("/"),n}return n=y,(r=[{key:"update",value:function(){c(h(y.prototype),"update",this).call(this),1==this.tilesetJsonLoaded&&1==this.tilemapJsonLoaded&&0==this.tilemapLoaded&&this.createTiles()}},{key:"getTileSets",value:function(){}},{key:"getAllSpritePaths",value:function(){}},{key:"getCollideableTiles",value:function(){}},{key:"createTiles",value:function(){var t=this.tileset,e=this.tilemap,n="".concat(this.rootPath,"/").concat(t.image),r=e.width*e.tilewidth/-2,o=e.height*e.tileheight/2,i=e.width*e.height;if(e.tilesets.length>1)return FrostFlake.Log.error("FrostFlake cannot handle maps with more than one tileset yet!"),void(this.tilemapLoaded=!0);for(var a=[],c=0;c<t.tiles.length;c++)for(var u=0;u<t.tiles[c].properties.length;u++)"collides"==t.tiles[c].properties[u].name&&1==t.tiles[c].properties[u].value&&a.push(t.tiles[c].id);for(var l=0;l<e.layers.length;l++){var s=e.layers[l];if(s.data.length!=i&&FrostFlake.Log.error("Bad layer size, expected ".concat(i," but got ").concat(s.data.length)),"tilelayer"==s.type){for(var f=[],h=0;h<s.data.length;h++){var p=s.data[h]-1,y=p%t.columns,d=Math.floor(p/t.columns),v=new Sprite(n);v.frame=new Frame(y*t.tilewidth,d*t.tileheight,t.tilewidth,t.tileheight),v.layer=l,v.collision=new Rectangle(0,0),v.position.x=Math.floor(h%s.height)*t.tileheight+r,v.position.y=Math.floor(h/s.width)*-t.tilewidth+o,v.alpha=s.visible?s.opacity:0,a.indexOf(p)>-1&&(v.collision=new Rectangle(t.tilewidth,t.tileheight),this.collidables.push(v)),f.push(v)}var b=FrostFlake.Game.renderer.renderToTexture(f,e.width*t.tilewidth,e.height*t.tileheight),m=new Sprite(b);m.layer=l,this.addChild(m)}}FrostFlake.Log.info("Tilemap loaded fired correctly!"),this.tilemapLoaded=!0}}])&&a(n.prototype,r),o&&a(n,o),y}(n(3).a),d=n(0);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var x=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(u,t);var e,n,i,a,c=(e=u,function(){var t,n=P(e);if(O()){var r=P(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return w(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),k(_(t=c.call(this,"/content/tileset.json","/content/tilemap.json")),"ball",void 0),t.ball=new o.a("/content/frostflake.png"),t.ball.velocity.rotation=d.a.randomInRange(-3,3),t.ball.scale=.75,t.ball.collision.radius=8,t.ball.layer=100,t.addChild(t.ball),t}return n=u,(i=[{key:"update",value:function(){if(m(P(u.prototype),"update",this).call(this),this.tilemapLoaded){for(var t=this.collidables.length-1;t>-1;t--){var e=this.collidables[t];this.ball.collision.collideWith(e.collision,RepositionType.Bounce,0,1)&&(this.ball.velocity.rotation=d.a.randomInRange(-3,3))}r.a.Game.camera.x=this.ball.x,r.a.Game.camera.y=this.ball.y}}}])&&b(n.prototype,i),a&&b(n,a),u}(y);k(x,"BALL_SPEED_MAX",100)},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(3),o=n(2),i=n(4),a=n(1);function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=e.get(t);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(t):n.value}function s(t,e,n){var r=e.get(t);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(t,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,"name",""),u(this,"frames",[]),u(this,"texture",""),u(this,"playing",!0),u(this,"looping",!0),u(this,"frameIndex",-1),h.set(this,{writable:!0,value:0})}var e,n,r;return e=t,(n=[{key:"start",value:function(){this.frameIndex<0&&this.restart(),this.playing=!0}},{key:"stop",value:function(){this.playing=!1}},{key:"restart",value:function(){this.frameIndex=0,s(this,h,this.currentFrame.seconds),this.playing=!0}},{key:"update",value:function(){var t=a.a.Game.time.frameSeconds;if(this.playing&&this.frames&&this.frames.length>1)for(s(this,h,l(this,h)-t);l(this,h)<=0&&(this.frameIndex<this.frames.length-1?this.frameIndex+=1:this.looping&&(this.frameIndex=0),s(this,h,l(this,h)+this.currentFrame.seconds),!(l(this,h)<0&&this.currentFrame.seconds<=0)););}},{key:"currentFrame",get:function(){return this.frames[this.frameIndex]}}])&&c(e.prototype,n),r&&c(e,r),t}(),h=new WeakMap;function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(r,t);var e,n=(e=r,function(){var t,n=b(e);if(v()){var r=b(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return d(this,t)});function r(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t=n.call(this);var e=new f;e.texture="/content/spritesheet.png",e.frames=[new i.a(0,160,16,16,.1),new i.a(16,160,16,16,.1),new i.a(32,160,16,16,.1),new i.a(48,160,16,16,.1),new i.a(64,160,16,16,.1),new i.a(80,160,16,16,.1),new i.a(96,160,16,16,.1),new i.a(112,160,16,16,.1)];var a=new o.a;return a.animation=e,a.scale=3,t.addChild(a),t}return r}(r.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _FrostFlake__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1),_Views_View__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),_demos_AnimationDemo__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(18),_demos_CollisionDemo__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(12),_demos_InputDemo__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(13),_demos_ManySpritesDemo__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(14),_demos_ParentChildDemo__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(15),_demos_RenderTargetDemo__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),_demos_TilemapDemo__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(17),canvas=document.getElementById("frostFlake"),ff=new _FrostFlake__WEBPACK_IMPORTED_MODULE_0__.a(canvas,60);ff.showDebug=!0,ff.start();for(var buttons=document.getElementsByTagName("button"),_loop=function _loop(i){var view=buttons[i].id;buttons[i].addEventListener("click",(function(evt){console.clear(),ff.camera.reset(),ff.view="Empty"==view?new _Views_View__WEBPACK_IMPORTED_MODULE_1__.a:eval("new ".concat(view))}))},i=0;i<buttons.length;i++)_loop(i);window.ff=ff,window.AnimationDemo=_demos_AnimationDemo__WEBPACK_IMPORTED_MODULE_2__.a,window.CollisionDemo=_demos_CollisionDemo__WEBPACK_IMPORTED_MODULE_3__.a,window.InputDemo=_demos_InputDemo__WEBPACK_IMPORTED_MODULE_4__.a,window.ManySpritesDemo=_demos_ManySpritesDemo__WEBPACK_IMPORTED_MODULE_5__.a,window.ParentChildDemo=_demos_ParentChildDemo__WEBPACK_IMPORTED_MODULE_6__.a,window.RenderTargetDemo=_demos_RenderTargetDemo__WEBPACK_IMPORTED_MODULE_7__.a,window.TilemapDemo=_demos_TilemapDemo__WEBPACK_IMPORTED_MODULE_8__.a}]);